import { useNavigate, useRouteLoaderData } from "react-router"
import type { User } from "../util"
import "./css/userProfile.css"
import { useState } from "react"

export default function UserProfile() {
    const { user } = useRouteLoaderData("root") as { user: User }
    const navigate = useNavigate()

    const [editingProfile, setEditingProfile] = useState(false);

    return (
        <>
            <header className="product-header">
                <button aria-label="Back" className="back" onClick={() => navigate(-1)}>
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22.1666 12.25H11.9081L14.7536 9.40448C15.0819 9.07635 15.2664 8.63123 15.2665 8.16706C15.2666 7.7029 15.0823 7.2577 14.7542 6.9294C14.426 6.60111 13.9809 6.41661 13.5167 6.4165C13.0526 6.41639 12.6074 6.60068 12.2791 6.92882L8.09542 11.1125C7.33098 11.879 6.9017 12.9174 6.9017 14C6.9017 15.0826 7.33098 16.1209 8.09542 16.8875L12.2791 21.0712C12.6074 21.3993 13.0526 21.5836 13.5167 21.5835C13.9809 21.5834 14.426 21.3989 14.7542 21.0706C15.0823 20.7423 15.2666 20.2971 15.2665 19.8329C15.2664 19.3687 15.0819 18.9236 14.7536 18.5955L11.9081 15.75H22.1666C22.6307 15.75 23.0758 15.5656 23.404 15.2374C23.7322 14.9092 23.9166 14.4641 23.9166 14C23.9166 13.5359 23.7322 13.0907 23.404 12.7625C23.0758 12.4344 22.6307 12.25 22.1666 12.25Z" />
                    </svg>

                </button>
                <button aria-label="Search" className="search">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M1.60679 18C2.43395 19.4356 4.26831 19.9288 5.7039 19.1017C5.70488 19.1011 5.70582 19.1005 5.70681 19.1L6.15179 18.843C6.99179 19.5616 7.95732 20.119 8.99977 20.487V21C8.99977 22.6568 10.3429 24 11.9998 24C13.6566 24 14.9998 22.6568 14.9998 21V20.487C16.0424 20.1184 17.0079 19.5604 17.8478 18.841L18.2948 19.099C19.7307 19.9274 21.5664 19.4349 22.3948 17.999C23.2232 16.563 22.7307 14.7274 21.2948 13.899L20.8508 13.643C21.0506 12.5554 21.0506 11.4405 20.8508 10.353L21.2948 10.097C22.7307 9.26855 23.2232 7.43292 22.3948 5.99695C21.5664 4.56103 19.7307 4.06852 18.2948 4.89694L17.8498 5.15395C17.0089 4.43616 16.0427 3.87984 14.9998 3.513V3C14.9998 1.34316 13.6566 0 11.9998 0C10.3429 0 8.99977 1.34316 8.99977 3V3.513C7.95718 3.88158 6.9916 4.43958 6.15179 5.15902L5.70479 4.90003C4.26882 4.07156 2.4332 4.56408 1.60477 6C0.776353 7.43592 1.26882 9.27159 2.70479 10.1L3.14879 10.356C2.94892 11.4435 2.94892 12.5584 3.14879 13.646L2.70479 13.902C1.27281 14.7326 0.781931 16.5647 1.60679 18ZM11.9998 8.00002C14.2089 8.00002 15.9998 9.79088 15.9998 12C15.9998 14.2091 14.2089 16 11.9998 16C9.79065 16 7.99979 14.2091 7.99979 12C7.99979 9.79088 9.79065 8.00002 11.9998 8.00002Z" fill="white" />
                    </svg>

                </button>
            </header>
            <main className="user-main">
                <div className="user-background">
                </div>
                <div className="user-profile-card">
                    <img className="user-profile-pic" src={user.avatar || "/images/default-profile.png"} alt={`${user?.displayName || "User"}'s profile`} />
                    <form action="" className="user-form">
                        <div className="user-form-group">
                            <label htmlFor="name">Name</label>
                            <input type="text" id="name" disabled={!editingProfile} defaultValue={user.name} />
                        </div>
                        <div className="user-form-group">
                            <label htmlFor="email">Email</label>
                            <input type="email" id="email" disabled={!editingProfile} defaultValue={user.email} />
                        </div>
                        <div className="user-form-group">
                            <label htmlFor="address">Address</label>
                            <input type="text" id="address" disabled={!editingProfile} defaultValue={user.address || ""} />
                        </div>
                        <div className="user-form-group">
                            <label htmlFor="password">Password</label>
                            <input type="password" id="password" disabled={!editingProfile} defaultValue={"supersecretPassword"} />
                        </div>
                        <div className="user-form-actions">
                            <button type="button" className="edit-button" onClick={() => setEditingProfile(!editingProfile)}>
                                {editingProfile ? <>
                                    save
                                </> : <>Edit Profile <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_1_611)">
                                        <path d="M9.28801 13.0669C6.97101 13.5129 5.82301 16.0928 5.32501 17.7008C5.27805 17.8507 5.26705 18.0096 5.29291 18.1645C5.31878 18.3194 5.38077 18.4661 5.47387 18.5926C5.56697 18.7191 5.68856 18.8219 5.82879 18.8926C5.96902 18.9634 6.12394 19.0001 6.28101 18.9998H10C10.4171 18.9999 10.8297 18.913 11.2113 18.7447C11.5929 18.5763 11.9353 18.3303 12.2164 18.0222C12.4976 17.7141 12.7115 17.3507 12.8443 16.9554C12.9772 16.56 13.0261 16.1412 12.988 15.7258C12.9349 15.3014 12.7947 14.8926 12.5762 14.5249C12.3577 14.1572 12.0656 13.8385 11.7183 13.5889C11.371 13.3393 10.9758 13.1641 10.5576 13.0743C10.1394 12.9844 9.70722 12.9819 9.28801 13.0669Z" />
                                        <path d="M23 8.979C22.7348 8.979 22.4804 9.08436 22.2929 9.27189C22.1054 9.45943 22 9.71378 22 9.979V15H18C17.2044 15 16.4413 15.3161 15.8787 15.8787C15.3161 16.4413 15 17.2044 15 18V22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7956 2 19V5C2 4.20435 2.31607 3.44129 2.87868 2.87868C3.44129 2.31607 4.20435 2 5 2H16.042C16.3072 2 16.5616 1.89464 16.7491 1.70711C16.9366 1.51957 17.042 1.26522 17.042 1C17.042 0.734784 16.9366 0.48043 16.7491 0.292893C16.5616 0.105357 16.3072 0 16.042 0L5 0C3.67441 0.00158786 2.40356 0.528882 1.46622 1.46622C0.528882 2.40356 0.00158786 3.67441 0 5L0 19C0.00158786 20.3256 0.528882 21.5964 1.46622 22.5338C2.40356 23.4711 3.67441 23.9984 5 24H16.343C16.9998 24.0019 17.6504 23.8734 18.2572 23.6221C18.8639 23.3708 19.4149 23.0017 19.878 22.536L22.536 19.878C23.0017 19.4149 23.3708 18.8639 23.6221 18.2572C23.8734 17.6504 24.0019 16.9998 24 16.343V9.979C24 9.71378 23.8946 9.45943 23.7071 9.27189C23.5196 9.08436 23.2652 8.979 23 8.979ZM18.464 21.122C18.0607 21.5208 17.5534 21.798 17 21.922V18C17 17.7348 17.1054 17.4804 17.2929 17.2929C17.4804 17.1054 17.7348 17 18 17H21.925C21.801 17.5534 21.5238 18.0607 21.125 18.464L18.464 21.122Z" />
                                        <path d="M14.566 14.1699C14.3682 14.1698 14.1749 14.1111 14.0105 14.0013C13.8461 13.8914 13.718 13.7352 13.6423 13.5525C13.5666 13.3698 13.5468 13.1688 13.5854 12.9748C13.624 12.7809 13.7192 12.6027 13.859 12.4629L21.712 4.60986C21.7998 4.52227 21.8694 4.41823 21.9169 4.30369C21.9644 4.18915 21.9889 4.06636 21.9889 3.94236C21.9889 3.81836 21.9644 3.69557 21.9169 3.58103C21.8694 3.4665 21.7998 3.36245 21.712 3.27486C21.6227 3.18204 21.5146 3.10946 21.3948 3.06201C21.2751 3.01457 21.1466 2.99338 21.018 2.99986C20.8894 3.00266 20.7629 3.03199 20.6462 3.08603C20.5295 3.14006 20.4253 3.21763 20.34 3.31386L12.74 11.7209C12.5622 11.9177 12.3134 12.0357 12.0486 12.0492C11.7837 12.0626 11.5243 11.9702 11.3275 11.7924C11.1307 11.6145 11.0126 11.3658 10.9992 11.1009C10.9858 10.836 11.0782 10.5767 11.256 10.3799L18.856 1.97986C19.1225 1.68233 19.4467 1.44204 19.8089 1.27358C20.1711 1.10512 20.5637 1.012 20.963 0.999861C21.3629 0.991292 21.7604 1.06318 22.132 1.21126C22.5036 1.35934 22.8416 1.58059 23.126 1.86186C23.6772 2.41434 23.9868 3.16292 23.9868 3.94336C23.9868 4.72381 23.6772 5.47238 23.126 6.02486L15.273 13.8779C15.1803 13.9709 15.0701 14.0445 14.9487 14.0947C14.8274 14.1448 14.6973 14.1703 14.566 14.1699Z" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_1_611">
                                            <rect width="24" height="24" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                </>}
                            </button>
                            <button className="logout-button">
                                Logout
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <g clip-path="url(#clip0_1_616)">
                                        <path d="M8 21H3.409C3.30061 20.9997 3.19673 20.9566 3.12009 20.8799C3.04344 20.8033 3.00026 20.6994 3 20.591V3.409C3.00026 3.30061 3.04344 3.19673 3.12009 3.12009C3.19673 3.04344 3.30061 3.00026 3.409 3H8C8.39782 3 8.77936 2.84196 9.06066 2.56066C9.34196 2.27936 9.5 1.89782 9.5 1.5C9.5 1.10218 9.34196 0.720644 9.06066 0.43934C8.77936 0.158035 8.39782 0 8 0L3.409 0C2.5052 0.00105862 1.63872 0.36056 0.999642 0.999642C0.36056 1.63872 0.00105862 2.5052 0 3.409L0 20.591C0.00105862 21.4948 0.36056 22.3613 0.999642 23.0004C1.63872 23.6394 2.5052 23.9989 3.409 24H8C8.39782 24 8.77936 23.842 9.06066 23.5607C9.34196 23.2794 9.5 22.8978 9.5 22.5C9.5 22.1022 9.34196 21.7206 9.06066 21.4393C8.77936 21.158 8.39782 21 8 21Z" fill="#EF2A39" />
                                        <path d="M22.6822 8.81727L18.8002 4.93827C18.6608 4.79901 18.4954 4.68855 18.3134 4.6132C18.1314 4.53785 17.9363 4.4991 17.7393 4.49915C17.5423 4.49919 17.3472 4.53804 17.1653 4.61347C16.9833 4.6889 16.8179 4.79944 16.6787 4.93877C16.5394 5.0781 16.4289 5.2435 16.3536 5.42553C16.2782 5.60755 16.2395 5.80263 16.2395 5.99963C16.2396 6.39748 16.3978 6.77901 16.6792 7.06027L20.0912 10.4713L6.50015 10.4993C6.10233 10.4993 5.7208 10.6573 5.43949 10.9386C5.15819 11.2199 5.00015 11.6014 5.00015 11.9993C5.00015 12.3971 5.15819 12.7786 5.43949 13.0599C5.7208 13.3412 6.10233 13.4993 6.50015 13.4993L20.1462 13.4743L16.6792 16.9413C16.4143 17.2257 16.2703 17.6019 16.2773 17.9905C16.2843 18.3791 16.4419 18.7498 16.7169 19.0245C16.9918 19.2992 17.3627 19.4564 17.7513 19.4631C18.1399 19.4698 18.5159 19.3254 18.8002 19.0603L22.6792 15.1813C23.097 14.7634 23.4285 14.2673 23.6546 13.7214C23.8808 13.1754 23.9972 12.5902 23.9972 11.9993C23.9972 11.4083 23.8808 10.8232 23.6546 10.2772C23.4285 9.73122 23.097 9.23514 22.6792 8.81727H22.6822Z" fill="#EF2A39" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_1_616">
                                            <rect width="24" height="24" fill="white" />
                                        </clipPath>
                                    </defs>
                                </svg>

                            </button>
                        </div>
                    </form>
                </div>
            </main>
        </>
    )
}